# [ Firebase ] 6. ë¡œê·¸ì¸í•œ ìœ ì €ì˜ ì •ë³´ ê°€ì ¸ì˜¤ê¸°

ìƒíƒœ: ì‘ì„± ì™„ë£Œ
ìƒì„± ì¼ì‹œ: 2022ë…„ 11ì›” 19ì¼ ì˜¤í›„ 11:03
ì¤‘ìš”ë„: â˜…â˜…â˜†
ìµœì¢… í¸ì§‘ ì¼ì‹œ: 2022ë…„ 12ì›” 6ì¼ ì˜¤ì „ 9:19
íƒœê·¸: ğŸ”¥ Firebase

# 6. ë¡œê·¸ì¸í•œ ìœ ì €ì˜ ì •ë³´ ê°€ì ¸ì˜¤ê¸°

íŒŒì´ì–´ë² ì´ìŠ¤ì—ì„œ ì§€ì›í•˜ëŠ” ìœ ì €ì˜ ì •ë³´ë¥¼ ê°€ì ¸ì˜¤ëŠ” ì½”ë“œëŠ” ë‹¤ìŒê³¼ ê°™ë‹¤.

```jsx
firebase.auth().onAuthStateChanged((user)=>{ // í˜„ì¬ ë¡œê·¸ì¸ ìƒíƒœì— ë³€í™”ê°€ ì¼ì–´ë‚¬ë‹¤ë©´? ìœ ì €ê°ì²´ë¥¼ ê°€ì ¸ì˜¨ë‹¤.
  if (user) { // ìœ ì €ê°ì²´ê°€ ì¡´ì¬í•œë‹¤ë©´?
    console.log(user);
		$("#userName").text(user.displayName); // ìœ ì € ê°ì²´ ì•ˆì— ë‹´ê¸´ displayName ì†ì„±ê°’ì„ ê°€ì ¸ì™€ ìœ ì €ì˜ ì´ë¦„ì„ í‘œì‹œ
  }
})
```

ìœ ì €ê°€ ë¡œê·¸ì¸ì‹œ / ë¡œê·¸ì•„ì›ƒì‹œ / í˜ì´ì§€ ìƒˆë¡œê³ ì¹¨ì‹œ ë™ì‘í•˜ëŠ” firebase.auth().onAuthStateChanged(()â‡’{}) í•¨ìˆ˜ëŠ” í˜ì´ì§€ ë‚´ì— ë„£ì–´ë‘ë©´ í•­ìƒ ë¡œê·¸ì¸ ë˜ì–´ìˆëŠ”ì§€ ì²´í¬í•  ìˆ˜ ìˆì§€ë§Œ, **ëŠ¦ê²Œ ì‹¤í–‰ë˜ëŠ” í•¨ìˆ˜**ì´ë‹¤. (íŒŒì´ì–´ë² ì´ìŠ¤ ì„œë²„ì—ê²Œ ê³„ì† ìš”ì²­í•˜ëŠ” ë°©ì‹ì´ê¸° ë•Œë¬¸)

ë”°ë¼ì„œ, ë¹ ë¥´ê²Œ ìœ ì €ì˜ ì •ë³´ë¥¼ ê°€ì ¸ì˜¤ê³  ì‹¶ë‹¤ë©´ í•œ ë²ˆ ê°€ì ¸ì˜¨ ìœ ì € ì •ë³´ë¥¼ ***localStorage***ì— ì €ì¥í•´ë‘ê³  ê³„ì† ë¶ˆëŸ¬ì˜¤ëŠ” ë°©ì‹ì´ ë°”ëŒì§í•˜ë‹¤.

![Untitled.png]([ Firebase ] 6 ë¡œê·¸ì¸í•œ ìœ ì €ì˜ ì •ë³´ ê°€ì ¸ì˜¤ê¸°/Untitled.png)

í¬ë¡¬ ê°œë°œìë„êµ¬ì—ì„œ Application íƒ­ ë“¤ì–´ê°€ë©´ localStorageë¥¼ í™•ì¸í•  ìˆ˜ ìˆë‹¤.

ì´ê³³ì— ìš°ë¦¬ëŠ” ë¡œì»¬ ìŠ¤í† ë¦¬ì§€ë¥¼ ë‹¤ë£¨ëŠ” ë¬¸ë²•ìœ¼ë¡œ ë°ì´í„°ë¥¼ ì €ì¥í•  ìˆ˜ ìˆë‹¤.

```jsx
localStorage.setItem('ë°ì´í„°ì´ë¦„', 'ë°ì´í„°') // ì €ì¥
localStorage.getItem('ë°ì´í„°ì´ë¦„') // ê°€ì ¸ì˜¤ê¸°
localStorage.removeItem('ë°ì´í„°ì´ë¦„') // ì‚­ì œ
```

ë¡œì»¬ ìŠ¤í† ë¦¬ì§€ì—ëŠ” **ë¬¸ì ë°ì´í„°**ë§Œ ì €ì¥ê°€ëŠ¥í•˜ë‹¤. (ì´ìœ  : JSON Stringë§Œ ì €ì¥í•˜ëŠ” ê³³ì„)
ì´ë¥¼ í™œìš©í•´ ë¡œì»¬ìŠ¤í† ë¦¬ì§€ì— ìœ ì € ì •ë³´ë¥¼ ì €ì¥í•˜ëŠ” ì½”ë“œë¥¼ ì‘ì„±í•´ë³´ì.

```jsx
firebase.auth().onAuthStateChanged((user)=>{
  if (user) {
    console.log(user)
    localStorage.setItem('user', JSON.stringify(user))
  }
})
```

### ê²°ê³¼)

![Untitled.png]([ Firebase ] 6 ë¡œê·¸ì¸í•œ ìœ ì €ì˜ ì •ë³´ ê°€ì ¸ì˜¤ê¸°/Untitled%201.png)

JSON ë¬¸ìì—´ í˜•íƒœì˜ ìœ ì € ê°ì²´ ì •ë³´ê°€ ë¡œì»¬ ìŠ¤í† ë¦¬ì§€ì— ì €ì¥ëœ ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤.

ìœ ì € ì •ë³´ë¥¼ ì €ì¥í•˜ì˜€ë‹¤ë©´, ë¡œì»¬ ìŠ¤í† ë¦¬ì§€ì— ìˆëŠ” ë°ì´í„°ë¥¼ êº¼ë‚´ë³´ì.

```jsx
var userData = localStorage.getItem('user');
$('#userName').text(JSON.parse(userData.displayName)) // JSONë¬¸ìì—´í™” ì‹œì¼°ë˜ ë°ì´í„°ë¥¼ ë‹¤ì‹œ object ìë£Œí˜•ìœ¼ë¡œ ë³€í™˜

firebase.auth().onAuthStateChanged((user)=>{
  if (user) {
    console.log(user)
    localStorage.setItem('user', JSON.stringify(user))
  }
})
```

ì—¬ê¸°ê¹Œì§€ ë”°ë¼ì™”ë‹¤ë©´ í™œìš©í•  ìˆ˜ ìˆëŠ” ë¶€ë¶„ìœ¼ë¡œëŠ”,

1. ë¡œê·¸ì•„ì›ƒ ë²„íŠ¼ ëˆ„ë¥´ë©´ localStorageì—ì„œ user ë°ì´í„° ì‚­ì œ.
2. onAuthStateChanged()ì˜ ê²½ìš° ìœ ì €ê°€ ì—†ì„ ë•Œë„ localStorageì— ìˆë˜ user ë°ì´í„° ì‚­ì œ.